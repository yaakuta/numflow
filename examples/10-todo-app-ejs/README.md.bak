# TODO App with Numflow Framework

Full-stack TODO application demonstrating **Bulk Registration**, **Feature-First Auto-Orchestration**, and **EJS Template Engine**.

## âœ¨ Features

- âœ… **Bulk Registration** - í•œ ì¤„ë¡œ ëª¨ë“  Feature ë“±ë¡!
- âœ… **Convention over Configuration** - í´ë” êµ¬ì¡°ë§Œìœ¼ë¡œ API ìë™ ìƒì„±
- âœ… **Feature-First Pattern** - Step ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìë™ ì‹¤í–‰
- âœ… **EJS Template Engine** - res.render() ì‚¬ìš©í•œ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§
- âœ… **REST API** - GET, POST, PUT, DELETE ì™„ë²½ ì§€ì›
- âœ… **Beautiful UI** - ë°˜ì‘í˜• ë””ìì¸

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
10-todo-app-ejs/
â”œâ”€â”€ app.js                          # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ (Bulk Registration!)
â”œâ”€â”€ package.json
â”œâ”€â”€ features/                       # Feature í´ë” (Convention!)
â”‚   â””â”€â”€ todos/
â”‚       â”œâ”€â”€ get/                    # GET /todos - ëª©ë¡ ì¡°íšŒ
â”‚       â”‚   â””â”€â”€ index.js
â”‚       â”œâ”€â”€ post/                   # POST /todos - TODO ì¶”ê°€
â”‚       â”‚   â”œâ”€â”€ index.js
â”‚       â”‚   â””â”€â”€ steps/
â”‚       â”‚       â”œâ”€â”€ 100-validate.js
â”‚       â”‚       â””â”€â”€ 200-create-todo.js
â”‚       â””â”€â”€ [id]/
â”‚           â”œâ”€â”€ put/                # PUT /todos/:id - í† ê¸€
â”‚           â”‚   â”œâ”€â”€ index.js
â”‚           â”‚   â””â”€â”€ steps/
â”‚           â”‚       â””â”€â”€ 100-toggle-todo.js
â”‚           â””â”€â”€ delete/             # DELETE /todos/:id - ì‚­ì œ
â”‚               â”œâ”€â”€ index.js
â”‚               â””â”€â”€ steps/
â”‚                   â””â”€â”€ 100-delete-todo.js
â”œâ”€â”€ views/
â”‚   â””â”€â”€ index.ejs                   # EJS í…œí”Œë¦¿
â””â”€â”€ public/
    â””â”€â”€ style.css                   # ìŠ¤íƒ€ì¼ì‹œíŠ¸
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
cd examples/10-todo-app-ejs
npm install
```

### 2. ì„œë²„ ì‹¤í–‰

```bash
npm start
```

ë˜ëŠ” ê°œë°œ ëª¨ë“œ (ìë™ ì¬ì‹œì‘):

```bash
npm run dev
```

### 3. ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸

```
http://localhost:3000/todos
```

## ğŸ¯ í•µì‹¬ ì½”ë“œ ì„¤ëª…

### 1. app.js - Bulk Registration!

```javascript
const numbers = require('numflow')
const app = numbers()

// ===== EJS ì„¤ì • =====
app.set('view engine', 'ejs')
app.set('views', path.join(__dirname, 'views'))

// ===== ì •ì  íŒŒì¼ ì œê³µ =====
app.use(serveStatic(path.join(__dirname, 'public')))

// ===== í•µì‹¬! Bulk Registration =====
// í•œ ì¤„ë¡œ ëª¨ë“  Feature ìë™ ë“±ë¡!
app.registerFeatures('./features')

app.listen(3000)
```

**ë!** ì´ê²Œ ì „ë¶€ì…ë‹ˆë‹¤. ë‚˜ë¨¸ì§€ëŠ” ëª¨ë‘ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤!

### 2. Convention over Configuration

í´ë” êµ¬ì¡°ë§Œ ë§Œë“¤ë©´ APIê°€ ìë™ ìƒì„±ë©ë‹ˆë‹¤:

| í´ë” ê²½ë¡œ | API ì—”ë“œí¬ì¸íŠ¸ | HTTP ë©”ì„œë“œ |
|----------|----------------|-------------|
| `features/todos/get/` | `/todos` | GET |
| `features/todos/post/` | `/todos` | POST |
| `features/todos/[id]/put/` | `/todos/:id` | PUT |
| `features/todos/[id]/delete/` | `/todos/:id` | DELETE |

**ê·œì¹™:**
- í´ë”ëª… (`get`, `post`, `put`, `delete`) â†’ HTTP ë©”ì„œë“œ
- í´ë” êµ¬ì¡° â†’ API Path
- `[id]` â†’ `:id` (Dynamic Route)

### 3. Feature íŒŒì¼ - ê±°ì˜ ë¹ˆ íŒŒì¼!

```javascript
// features/todos/post/index.js
const numbers = require('numflow')

module.exports = numbers.feature({
  // ëª¨ë“  ê²ƒì´ ìë™ ì¶”ë¡ ë¨!
  // method: 'POST' (í´ë”ëª…ì—ì„œ)
  // path: '/todos' (í´ë” êµ¬ì¡°ì—ì„œ)
  // steps: './steps' (ë””ë ‰í† ë¦¬ ìë™ ì¸ì‹)

  // ìš”ì²­ ë°ì´í„°ë§Œ ì¶”ì¶œ
  contextInitializer: (req, res) => ({
    todoText: req.body.text,
  }),
})
```

### 4. Step í•¨ìˆ˜ - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

```javascript
// features/todos/post/steps/100-validate.js
async function validate(context) {
  const { todoText } = context

  if (!todoText || todoText.trim() === '') {
    throw new Error('TODO ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
  }

  context.results.validation = {
    isValid: true,
    validatedText: todoText.trim(),
  }

  return true
}

module.exports = validate
```

```javascript
// features/todos/post/steps/200-create-todo.js
async function createTodo(context) {
  const { validatedText } = context.results.validation

  const newTodo = {
    id: global.nextId++,
    text: validatedText,
    completed: false,
  }

  global.todos.push(newTodo)
  context.results.todo = newTodo

  return true
}

module.exports = createTodo
```

**ìë™ ì‹¤í–‰!** Stepì€ íŒŒì¼ëª… ìˆœì„œëŒ€ë¡œ ìë™ ì‹¤í–‰ë©ë‹ˆë‹¤:
1. `100-validate.js` â†’ ê²€ì¦
2. `200-create-todo.js` â†’ ìƒì„±

### 5. EJS ë Œë”ë§ - res.render()

```javascript
// app.js - ì¼ë°˜ ë¼ìš°íŠ¸ ì‚¬ìš©
app.get('/todos', (req, res) => {
  const todos = global.todos || []
  res.render('index', { todos })
})
```

> ğŸ’¡ **ì°¸ê³ **: GET ìš”ì²­ì€ ë‹¨ìˆœí•˜ë¯€ë¡œ ì¼ë°˜ ë¼ìš°íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. FeatureëŠ” ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ í•„ìš”í•œ POST/PUT/DELETEì—ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

| Method | Endpoint | Description | Request Body |
|--------|----------|-------------|--------------|
| GET | `/todos` | ëª¨ë“  TODO ëª©ë¡ ì¡°íšŒ (HTML) | - |
| POST | `/todos` | ìƒˆ TODO ì¶”ê°€ | `{ "text": "í•  ì¼" }` |
| PUT | `/todos/:id` | TODO ì™„ë£Œ ìƒíƒœ í† ê¸€ | - |
| DELETE | `/todos/:id` | TODO ì‚­ì œ | - |

### API í…ŒìŠ¤íŠ¸ (curl)

```bash
# TODO ëª©ë¡ ì¡°íšŒ
curl http://localhost:3000/todos

# TODO ì¶”ê°€
curl -X POST http://localhost:3000/todos \
  -H "Content-Type: application/json" \
  -d '{"text":"Numflow í”„ë ˆì„ì›Œí¬ ë°°ìš°ê¸°"}'

# TODO ì™„ë£Œ í† ê¸€
curl -X PUT http://localhost:3000/todos/1

# TODO ì‚­ì œ
curl -X DELETE http://localhost:3000/todos/1
```

## ğŸ¨ í™”ë©´ êµ¬ì„±

1. **í—¤ë”** - ì•± ì œëª© ë° ê¸°ìˆ  ìŠ¤íƒ ë°°ì§€
2. **ì…ë ¥ í¼** - ìƒˆ TODO ì¶”ê°€
3. **TODO ëª©ë¡** - ì²´í¬ë°•ìŠ¤, ì‚­ì œ ë²„íŠ¼
4. **í†µê³„** - ì „ì²´/ì™„ë£Œ/ë‚¨ìŒ ê°œìˆ˜
5. **í‘¸í„°** - í”„ë ˆì„ì›Œí¬ ì •ë³´

## ğŸ’¡ í•µì‹¬ ê°œë…

### Convention over Configuration

ì„¤ì • íŒŒì¼ ì—†ì´ í´ë” êµ¬ì¡°ë§Œìœ¼ë¡œ APIë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

**Before (Express):**
```javascript
// 100ì¤„ ì´ìƒì˜ ë¼ìš°íŠ¸ ì •ì˜ ì½”ë“œ...
app.get('/todos', getTodos)
app.post('/todos', createTodo)
app.put('/todos/:id', updateTodo)
app.delete('/todos/:id', deleteTodo)
```

**After (Numflow):**
```javascript
// ë‹¨ í•œ ì¤„!
app.registerFeatures('./features')
```

### Feature-First Auto-Orchestration

ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ Stepìœ¼ë¡œ ë¶„ë¦¬í•˜ë©´ ìë™ìœ¼ë¡œ ìˆœì°¨ ì‹¤í–‰ë©ë‹ˆë‹¤.

**ì¥ì :**
- âœ… ê° Stepì´ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- âœ… ì¤‘ê°„ì— Step ì¶”ê°€/ì‚­ì œ ì‰¬ì›€
- âœ… ì½”ë“œ ê°€ë…ì„± í–¥ìƒ
- âœ… ì—ëŸ¬ ì²˜ë¦¬ ìë™í™”

## ğŸ”§ í™•ì¥ ê°€ëŠ¥ì„±

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°

```javascript
// features/todos/post/steps/200-create-todo.js
async function createTodo(context) {
  const { validatedText } = context.results.validation

  // ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
  const newTodo = await db.todos.create({
    text: validatedText,
    completed: false,
  })

  context.results.todo = newTodo
  return true
}
```

### ë¹„ë™ê¸° ì‘ì—… ì¶”ê°€

```javascript
// features/todos/post/index.js
module.exports = numbers.feature({
  steps: './steps',
  asyncTasks: './async-tasks',  // ìë™ ì¸ì‹!
})

// features/todos/post/async-tasks/send-notification.js
async function sendNotification(context) {
  const { todo } = context.results
  await notificationService.send({
    message: `ìƒˆ TODO ì¶”ê°€: ${todo.text}`,
  })
}
module.exports = sendNotification
```

### ì¸ì¦/ê¶Œí•œ ì¶”ê°€

```javascript
// features/todos/post/index.js
module.exports = numbers.feature({
  middlewares: [authenticate, authorize],  // Feature-level ë¯¸ë“¤ì›¨ì–´
  contextInitializer: (req, res) => ({
    userId: req.user.id,
    todoText: req.body.text,
  }),
})
```

## ğŸ“š í•™ìŠµ í¬ì¸íŠ¸

ì´ ì˜ˆì œì—ì„œ ë°°ìš¸ ìˆ˜ ìˆëŠ” ê²ƒ:

1. âœ… **Bulk Registration** - ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸ì—ì„œ Feature ê´€ë¦¬ ë°©ë²•
2. âœ… **Convention over Configuration** - ì„¤ì • ì—†ì´ í´ë” êµ¬ì¡°ë¡œ ê°œë°œ
3. âœ… **Feature-First Pattern** - Step ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬ì¡°í™”
4. âœ… **EJS Template** - res.render() ì‚¬ìš©ë²•
5. âœ… **REST API** - CRUD ì „ì²´ êµ¬í˜„
6. âœ… **Error Handling** - Feature ì—ëŸ¬ ìë™ ìºì¹˜

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ (MongoDB, PostgreSQL)
- [ ] ì‚¬ìš©ì ì¸ì¦ ì¶”ê°€
- [ ] TODO ì¹´í…Œê³ ë¦¬ ê¸°ëŠ¥
- [ ] TODO ìš°ì„ ìˆœìœ„
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] í˜ì´ì§€ë„¤ì´ì…˜

## ğŸ“– ê´€ë ¨ ë¬¸ì„œ

- [Feature-First API Documentation](../../docs/api/feature.md)
- [Bulk Registration Guide](../../docs/getting-started/feature-first.md)
- [Numflow Framework Documentation](../../docs/README.md)

---

**Built with â¤ï¸ using Numflow Framework**
